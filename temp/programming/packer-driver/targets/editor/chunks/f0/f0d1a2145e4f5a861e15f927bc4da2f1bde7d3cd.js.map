{"version":3,"sources":["file:///Users/abhishekrawat/Desktop/ImageSlicerViewer-sliceAnim/assets/scripts/gamePlay.ts"],"names":["_decorator","Component","ImageAsset","Prefab","instantiate","CCInteger","UITransform","Vec3","ResourceUtils","SoundManager","photoSlice2","SingletonClass","ccclass","property","GamePlay","type","imgCallback","smallSlice","selectedImage","puzzleResult","frameCh","soundsObj","soundManager","imageComplete","result","pos","removeAllChildren","start","getInstance","handleStartButtonClick","boolSound","playSoundEffect","getMusicFile","setting","settingMenu","node","addChild","setImageforSlice","imageAsset","inc","callback","a","Array","loopNum","frame","getChildByName","i","spilt","slicePrefab","getComponent","setSlice","setPosition","height","getPosition","radomH","fgetRandom","setSiblingIndex","undefined","y","min","max","flag","value","Math","floor","random","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, ImageAsset, SpriteFrame, Texture2D, math, Sprite, macro, Prefab, instantiate, Label, Enum, CCInteger, UITransform, Vec3 } from 'cc';\nimport { ResourceUtils } from './managers/resourceUtils';\nimport { SoundManager } from './managers/soundManager';\n\nimport { photoSlice2 } from './photoSlice2';\nimport { SingletonClass } from './singleTon';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GamePlay')\nexport class GamePlay extends Component {\n    @property({type   : Prefab})\n    settingMenu : Prefab = null;\n\n    @property({type:ImageAsset})\n    imageAssert:ImageAsset=null;\n    \n    @property({type : Prefab})\n    slicePrefab : Prefab = null;\n    \n    @property({type: Prefab})\n    imageGlow : Prefab = null;\n    \n    @property({type: CCInteger})\n    spilt : any = 0;\n    \n    @property({type: CCInteger})\n    sliceNumber : any = 0;\n\n    imgCallback : any = null;\n\n    smallSlice : Node = null;\n    selectedImage  : SpriteFrame = null; \n    puzzleResult : Boolean = false;\n    frameCh:Node=null;\n    soundsObj:any=null;\n    soundManager:any=null;\n    start() {\n        this.soundsObj= SingletonClass.getInstance();\n        this.soundManager = SoundManager.getInstance();\n    }\n    handleStartButtonClick(){\n        if(!this.soundsObj.boolSound){\n            \n            this.soundManager.playSoundEffect( ResourceUtils.getInstance().getMusicFile(\"sound\"),false);\n        }\n        let setting=instantiate(this.settingMenu);\n        this.node.addChild(setting);\n\n    }\n    setImageforSlice(imageAsset: any, inc:number,callback){\n        // console.log(imageAsset);\n        this.imgCallback = callback\n        var a=new Array();\n        var loopNum=0;\n        let frame = this.node.getChildByName('Frame');\n        this.frameCh = frame.getChildByName('frameChild');\n        \n        this.frameCh.removeAllChildren();\n        \n        for(var i=0;i<this.spilt;i++)\n        { \n            this.smallSlice = instantiate(this.slicePrefab);\n            this.smallSlice.getComponent(photoSlice2).setSlice(this.spilt,i,imageAsset,this.imageComplete) ;\n        \n            this.smallSlice.setPosition(new Vec3(0,i*this.smallSlice.getComponent(UITransform).height,0));\n            \n            \n            this.frameCh.addChild(this.smallSlice);\n            let pos = this.smallSlice.getPosition();\n            let radomH=this.fgetRandom(a,0,this.spilt);\n            this.smallSlice.setSiblingIndex(radomH);\n            if(a[radomH]!=undefined){\n            for(let i=0;i<this.spilt;i++){\n                if(a[i]==undefined){\n                    radomH=i;\n                    a[i]=1;\n                    break;\n                }\n            }\n            }else{\n                a[radomH]=1;\n                \n            }\n          \n            pos.y=(imageAsset.height/2)-(imageAsset.height/this.spilt)-radomH*((imageAsset.height/this.spilt));\n            pos.y+= (imageAsset.height/this.spilt)/2\n            this.smallSlice.setPosition(pos);\n            loopNum++;\n        }\n \n    }\n    \n    fgetRandom(a,min, max) {\n        var flag =true;\n        let value=Math.floor(Math.random() * (max - min) + min); \n        return value;\n        \n      }\n    imageComplete = (result, pos : Vec3) =>{\n        if(result){\n            this.frameCh.removeAllChildren();\n        }\n        this.puzzleResult = result;\n        this.imgCallback(this.puzzleResult, pos);\n        }\n\n    update(deltaTime: number) {\n    }\n\n\n    \n}"]}